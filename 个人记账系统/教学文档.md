# 📖 个人记账系统 - 教学文档

## 🎯 教学目标

### 知识目标
1. 理解面向对象编程的基本概念（类、对象、方法）
2. 掌握文件操作（JSON格式的读写）
3. 熟悉列表和字典的使用
4. 理解模块化编程的思想

### 能力目标
1. 能够设计简单的类结构
2. 能够实现数据的持久化存储
3. 能够编写交互式命令行程序
4. 能够进行简单的数据统计

### 情感目标
1. 培养编程兴趣和成就感
2. 理解编程解决实际问题的价值
3. 培养代码规范和模块化思维

---

## 📚 课程安排建议

### 第一课时：项目介绍和Transaction类（45分钟）

#### 1. 项目引入（10分钟）
- 展示完整的记账系统功能
- 说明项目的实际应用价值
- 介绍项目结构

#### 2. Transaction类设计（20分钟）

**知识点讲解：**
- 什么是类？什么是对象？
- 类的属性和方法
- `__init__` 构造函数
- `__str__` 和 `__repr__` 方法

**代码示例：**
```python
class Transaction:
    def __init__(self, amount, category, description="", transaction_type="支出"):
        self.amount = float(amount)
        self.category = category
        self.description = description
        self.transaction_type = transaction_type
        self.date = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
```

**实践任务：**
- 创建Transaction对象
- 访问对象的属性
- 调用对象的方法

#### 3. 课堂练习（15分钟）
- 创建几个不同的交易记录对象
- 打印交易记录信息

---

### 第二课时：Account类和文件操作（45分钟）

#### 1. Account类设计（20分钟）

**知识点讲解：**
- 类的组合（Account包含多个Transaction）
- 列表的使用
- 文件操作基础

**核心方法讲解：**
- `add_transaction()`: 添加交易记录
- `_load_data()`: 从文件加载数据
- `_save_data()`: 保存数据到文件

**代码示例：**
```python
def _load_data(self):
    if os.path.exists(self.data_file):
        with open(self.data_file, 'r', encoding='utf-8') as f:
            data = json.load(f)
            self.transactions = [Transaction.from_dict(item) for item in data]
```

#### 2. JSON文件操作（15分钟）

**知识点讲解：**
- JSON格式介绍
- `json.load()` 和 `json.dump()`
- 文件读写模式
- 异常处理

**实践任务：**
- 手动创建JSON文件
- 读取和写入JSON数据

#### 3. 课堂练习（10分钟）
- 实现添加交易记录功能
- 测试数据保存和加载

---

### 第三课时：统计功能和主程序（45分钟）

#### 1. 统计功能实现（20分钟）

**知识点讲解：**
- 列表推导式
- 字典的使用
- 数据统计方法

**核心方法：**
- `get_balance()`: 计算余额
- `get_category_summary()`: 按类别统计
- `get_transactions_by_category()`: 按类别查询

**代码示例：**
```python
def get_category_summary(self):
    category_dict = {}
    for t in self.transactions:
        if t.transaction_type == "支出":
            if t.category not in category_dict:
                category_dict[t.category] = 0
            category_dict[t.category] += t.amount
    return category_dict
```

#### 2. 主程序设计（15分钟）

**知识点讲解：**
- 主程序循环
- 菜单设计
- 用户输入处理
- 函数封装

**实践任务：**
- 实现主菜单
- 实现各个功能函数

#### 3. 综合测试（10分钟）
- 运行完整程序
- 测试各项功能

---

### 第四课时：项目完善和扩展（45分钟）

#### 1. 代码优化（15分钟）
- 添加异常处理
- 输入验证
- 代码注释规范

#### 2. 功能扩展（20分钟）

**可选扩展功能：**
- 按时间范围查询
- 数据导出功能
- 简单的数据可视化

#### 3. 项目总结（10分钟）
- 回顾知识点
- 讨论改进方向
- 布置课后作业

---

## 🔍 重点知识点详解

### 1. 面向对象编程

#### 类的定义
```python
class Transaction:
    """交易记录类"""
    
    def __init__(self, amount, category):
        """构造函数"""
        self.amount = amount
        self.category = category
```

**教学要点：**
- `class` 关键字定义类
- `__init__` 是构造函数，在创建对象时自动调用
- `self` 代表对象本身
- 属性通过 `self.属性名` 定义

#### 对象的使用
```python
# 创建对象
t1 = Transaction(100, "餐饮")

# 访问属性
print(t1.amount)  # 100
print(t1.category)  # 餐饮

# 调用方法
print(t1)  # 调用 __str__ 方法
```

### 2. 文件操作

#### JSON文件读写
```python
import json

# 写入JSON文件
data = [{"name": "张三", "age": 20}]
with open('data.json', 'w', encoding='utf-8') as f:
    json.dump(data, f, ensure_ascii=False, indent=2)

# 读取JSON文件
with open('data.json', 'r', encoding='utf-8') as f:
    data = json.load(f)
```

**教学要点：**
- `with` 语句自动管理文件资源
- `encoding='utf-8'` 支持中文
- `ensure_ascii=False` 保持中文显示
- `indent=2` 格式化输出

### 3. 列表和字典

#### 列表操作
```python
# 列表推导式
expenses = [t.amount for t in transactions if t.transaction_type == "支出"]

# 列表遍历
for transaction in transactions:
    print(transaction)
```

#### 字典操作
```python
# 字典统计
category_dict = {}
for t in transactions:
    if t.category not in category_dict:
        category_dict[t.category] = 0
    category_dict[t.category] += t.amount
```

---

## 💡 教学技巧

### 1. 循序渐进
- 先讲解单个类，再讲解类的组合
- 先实现基础功能，再添加高级功能
- 先理解代码，再动手编写

### 2. 实例驱动
- 用实际例子说明概念
- 让学生先看到效果，再理解原理
- 鼓励学生修改代码观察变化

### 3. 问题引导
- 提问：如何保存数据？
- 提问：如何统计支出？
- 提问：如何查询特定类别？

### 4. 实践为主
- 理论讲解不超过30%
- 70%时间用于编码实践
- 鼓励学生独立思考和尝试

---

## 🎓 学生作业建议

### 基础作业
1. 理解并运行完整程序
2. 添加至少5条收入和支出记录
3. 查看账户摘要，理解统计结果

### 进阶作业
1. 添加输入验证（金额不能为负数）
2. 实现按日期查询功能
3. 添加删除交易记录的功能

### 扩展作业
1. 实现数据导出功能（导出为CSV格式）
2. 添加预算功能（设置每月预算上限）
3. 使用matplotlib绘制支出分类饼图

---

## ❓ 常见问题解答

### Q1: 为什么要用类？
**A:** 类可以将相关的数据和方法组织在一起，使代码更清晰、更易维护。

### Q2: 为什么要用JSON文件？
**A:** JSON格式简单易读，Python有内置支持，适合存储结构化数据。

### Q3: `_load_data()` 前面的下划线是什么意思？
**A:** 单下划线表示这是一个"私有"方法，建议只在类内部使用。

### Q4: 如何添加新功能？
**A:** 可以在Account类中添加新方法，然后在main.py中调用。

---

## 📊 评估标准

### 基础要求（60分）
- 能够运行程序
- 理解基本代码结构
- 能够添加和查看记录

### 进阶要求（80分）
- 理解面向对象编程
- 能够修改代码添加简单功能
- 代码有基本注释

### 优秀要求（100分）
- 完全理解代码逻辑
- 能够独立添加新功能
- 代码规范，有完整注释
- 能够解释设计思路

---

## 🔗 相关资源

- [Python官方文档](https://docs.python.org/zh-cn/3/)
- [JSON格式说明](https://www.json.org/json-zh.html)
- [面向对象编程教程](https://www.runoob.com/python3/python3-class.html)

---

**教学文档版本**: 1.0  
**最后更新**: 2025年

